---
- hosts: all
  roles:
  - name: core
    tags: [core]
  - name: aur
    tags: [aur]
  - sshd
  - name: wireguard
    tags: [network, wireguard]

- hosts: workstations
  roles:
  - name: core
    tags: [core]
  - name: bluetooth
    tags: [bluetooth]
  - zsh
  - name: systemd-networkd
    tags: [network]
  - name: desktop-core
    tags: [desktop]
  - name: sway-desktop
    tags: [desktop]
  - name: desktop-apps
    tags: [desktop, desktop-apps]
  - name: snap
    tags: [snap]
  - name: boot
    tags: [boot]
  - name: 1password
    tags: [1password]
  - name: stats
    tags: [stats]

- hosts: sam-desktop
  tasks:
  - name: blacklist watchdog kernel module
    ansible.builtin.copy:
      content: 'blacklist sp5100_tco'
      dest: /etc/modprobe.d/sp5100_tco.conf
  roles:
  - name: asus-wmi-sensors
    tags: [asus]
